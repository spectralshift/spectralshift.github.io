"use strict";(self.webpackChunkoveranalyse=self.webpackChunkoveranalyse||[]).push([[531],{99007:(e,t,i)=>{i.d(t,{A:()=>a});i(65043);var n=i(96446),u=i(85865),o=i(70579);const a=e=>{let{title:t,description:i}=e;return(0,o.jsxs)(n.A,{sx:{mb:4},children:[(0,o.jsx)(u.A,{variant:"h4",gutterBottom:!0,children:t}),i&&(0,o.jsx)(u.A,{variant:"subtitle1",sx:{mb:3,fontStyle:"italic",color:"text.secondary",borderLeft:"4px solid",borderColor:"primary.main",pl:2},children:i})]})}},37894:(e,t,i)=>{i.r(t),i.d(t,{default:()=>N});var n=i(65043),u=i(63336),o=i(96446),a=i(68903),r=i(60598),l=i(32143),p=i(85293),d=i(51962),s=i(64600),c=i(57972),m=i(14256),h=i(11906),g=i(79650),b=i(71806),C=i(84882),v=i(28076),y=i(10039),x=i(73460),f=i(85865);function S(e){return e.totalBuildingLevels?e.totalBuildingLevels:e.buildingCount&&e.buildingLevel?e.buildingCount*e.buildingLevel:1}function A(e,t){return Math.ceil(e.reduce(((e,i)=>e+i.requiredAmount*S(t)),0))}function B(e,t){const i=A(e,t),n=t.buildingLevel||20;return Math.ceil(i/n)}function F(e,t){if(!e)return null;const i=t.multipliers[e.id]||1;return Math.ceil((i+t.globalBuff)*e.requiredAmount)}const k=JSON.parse('[{"id":"WheatFarm","name":"Wheat Farm","input":{},"output":{"Wheat":1}},{"id":"StoneQuarry","name":"Stone Quarry","input":{},"output":{"Stone":1}},{"id":"LoggingCamp","name":"Logging Camp","input":{},"output":{"Wood":1}},{"id":"Aqueduct","name":"Aqueduct","input":{},"output":{"Water":1}},{"id":"IronMiningCamp","name":"Iron Mining Camp","input":{},"output":{"Iron":1}},{"id":"CopperMiningCamp","name":"Copper Mining Camp","input":{},"output":{"Copper":1}},{"id":"CoalMine","name":"Coal Mine","input":{},"output":{"Coal":1}},{"id":"Sandpit","name":"Sandpit","input":{},"output":{"Sand":1}},{"id":"GoldMiningCamp","name":"Gold Mining Camp","input":{},"output":{"Gold":1}},{"id":"UraniumMine","name":"Uranium Mine","input":{},"output":{"Uranium":1}},{"id":"UraniumEnrichmentPlant","name":"Uranium Enrichment Plant","input":{"Uranium":10},"output":{"NuclearFuelRod":1}},{"id":"OilWell","name":"Oil Well","input":{},"output":{"Oil":1}},{"id":"NaturalGasWell","name":"Natural Gas Well","input":{},"output":{"NaturalGas":1}},{"id":"AluminumSmelter","name":"Aluminum Smelter","input":{},"output":{"Aluminum":1}},{"id":"HydroDam","name":"Hydro Dam","input":{},"output":{"Water":1}},{"id":"SwordForge","name":"Sword Forge","input":{"Tool":2},"output":{"Sword":1}},{"id":"Armory","name":"Armory","input":{"Tool":2},"output":{"Armor":1}},{"id":"ChariotWorkshop","name":"Chariot Workshop","input":{"Horse":2,"Lumber":2,"Copper":1},"output":{"Chariot":1}},{"id":"KnightCamp","name":"Knight Camp","input":{"Horse":1,"Armor":1,"Sword":1},"output":{"Knight":1}},{"id":"CannonWorkshop","name":"Cannon Workshop","input":{"Iron":2,"Wood":1,"Tool":1},"output":{"Cannon":1}},{"id":"GunpowderMill","name":"Gunpowder Mill","input":{"Wood":1,"Coal":1},"output":{"Gunpowder":1}},{"id":"DynamiteWorkshop","name":"Dynamite Workshop","input":{"Wheat":1,"Gunpowder":1,"Coal":1},"output":{"Dynamite":1}},{"id":"SiegeWorkshop","name":"Siege Workshop","input":{"Lumber":2,"Iron":2,"Tool":1},"output":{"SiegeRam":1}},{"id":"CaravelBuilder","name":"Caravel Builder","input":{"Lumber":5,"Cloth":2,"Tool":2},"output":{"Caravel":1}},{"id":"GalleonBuilder","name":"Galleon Builder","input":{"Caravel":1,"Sword":1,"SiegeRam":1,"Armor":1},"output":{"Galleon":1}},{"id":"FrigateBuilder","name":"Frigate Builder","input":{"Galleon":1,"Knight":1,"Cannon":1,"Lens":1},"output":{"Frigate":1}},{"id":"RifleFactory","name":"Rifle Factory","input":{"Gunpowder":5,"Tool":5},"output":{"Rifle":1}},{"id":"GatlingGunFactory","name":"Gatling Gun Factory","input":{"Rifle":1,"Gunpowder":5},"output":{"GatlingGun":1}},{"id":"ArtilleryFactory","name":"Artillery Factory","input":{"GatlingGun":1,"Dynamite":1,"Aluminum":5},"output":{"Artillery":1}},{"id":"IroncladBuilder","name":"Ironclad Builder","input":{"GatlingGun":1,"Rifle":1,"Frigate":1},"output":{"Ironclad":1}},{"id":"BattleshipBuilder","name":"Battleship Builder","input":{"Ironclad":1,"Artillery":1,"Cable":5,"Steel":5,"Aluminum":5},"output":{"Battleship":1}},{"id":"TankFactory","name":"Tank Factory","input":{"Engine":1,"Steel":10,"Cannon":1,"GatlingGun":1},"output":{"Tank":1}},{"id":"BiplaneFactory","name":"Biplane Factory","input":{"Engine":1,"Steel":1,"Lens":1,"Petrol":5},"output":{"Biplane":1}},{"id":"RocketFactory","name":"Rocket Factory","input":{"Engine":1,"Artillery":1,"Steel":5,"Cable":5,"Petrol":10},"output":{"Rocket":1}},{"id":"AtomicFacility","name":"Atomic Facility","input":{"Dynamite":10,"Uranium":10},"output":{"AtomicBomb":1}},{"id":"FighterJetPlant","name":"Fighter Jet Plant","input":{"Airplane":1,"Artillery":1},"output":{"FighterJet":2}},{"id":"AircraftCarrierYard","name":"Aircraft Carrier Yard","input":{"Battleship":1,"FighterJet":10},"output":{"AircraftCarrier":1}},{"id":"SubmarineYard","name":"Submarine Yard","input":{"Ironclad":2},"output":{"Submarine":1},"ev":true},{"id":"NuclearSubmarineYard","name":"Nuclear Submarine Yard","input":{"Submarine":2,"NuclearMissile":2},"output":{"NuclearSubmarine":1}},{"id":"NuclearMissileSilo","name":"Nuclear Missile Silo","input":{"AtomicBomb":1,"Rocket":1},"output":{"NuclearMissile":1}},{"id":"Peacekeeper","name":"Peacekeeper","input":{"NuclearMissile":4,"Diplomacy":1,"Radio":1},"output":{"Peace":1}},{"id":"WritersGuild","name":"Writers Guild","input":{"Paper":2},"output":{"Poem":1}},{"id":"PoetrySchool","name":"Poetry School","input":{"Paper":2,"Alcohol":1},"output":{"Poem":2}},{"id":"PaintersGuild","name":"Painters Guild","input":{"Paper":2},"output":{"Painting":1}},{"id":"MusiciansGuild","name":"Musicians Guild","input":{"Alcohol":2},"output":{"Music":1}},{"id":"ActorsGuild","name":"Actors Guild","input":{"Music":1,"Poem":1},"output":{"Opera":2}},{"id":"Shrine","name":"Shrine","input":{"Horse":1,"Alcohol":1},"output":{"Faith":1}},{"id":"Church","name":"Church","input":{"Music":1,"Poem":1},"output":{"Faith":3}},{"id":"Mosque","name":"Mosque","input":{"Cheese":1,"Opera":1},"output":{"Faith":4}},{"id":"Pagoda","name":"Pagoda","input":{"Painting":1,"Furniture":1},"output":{"Faith":3}},{"id":"University","name":"University","input":{"Poem":2,"Faith":2},"output":{"Philosophy":1}},{"id":"PublishingHouse","name":"Publishing House","input":{"Philosophy":2,"Book":10},"output":{"Newspaper":1}},{"id":"MagazinePublisher","name":"Magazine Publisher","input":{"Sports":2,"Book":10},"output":{"Magazine":1}},{"id":"Museum","name":"Museum","input":{"Music":2,"Painting":2},"output":{"Culture":1}},{"id":"Courthouse","name":"Courthouse","input":{"Philosophy":1,"Faith":1,"Culture":1},"output":{"Law":1}},{"id":"Stadium","name":"Stadium","input":{"Culture":1,"Opera":1,"Philosophy":1},"output":{"Sports":1}},{"id":"Parliament","name":"Parliament","input":{"Culture":2,"Philosophy":2,"Law":2},"output":{"Politics":1}},{"id":"MovieStudio","name":"Movie Studio","input":{"Sports":5,"Lens":5,"Garment":5},"output":{"Movie":1}},{"id":"RadioStation","name":"Radio Station","input":{"Magazine":5,"Newspaper":5,"Culture":5},"output":{"Radio":1}},{"id":"Embassy","name":"Embassy","input":{"Law":5,"Politics":5,"Philosophy":5},"output":{"Diplomacy":1}},{"id":"TVStation","name":"TV Station","input":{"Radio":2,"Movie":10},"output":{"TV":1},"ev":true},{"id":"InternetServiceProvider","name":"Internet Service Provider","input":{"Computer":1,"OpticalFiber":5},"output":{"Internet":1}},{"id":"SoftwareCompany","name":"Software Company","input":{"Computer":1,"Philosophy":10},"output":{"Software":1}},{"id":"SupercomputerLab","name":"Supercomputer Lab","input":{"Software":1,"Computer":5},"output":{"Supercomputer":1}},{"id":"CivGPT","name":"CivGPT","input":{"Internet":1,"Supercomputer":2,"Radio":1},"output":{"CivGPT":1}},{"id":"CivTok","name":"CivTok","input":{"Internet":1,"Politics":1},"output":{"CivTok":1}},{"id":"CivOasis","name":"CivOasis","input":{"CivTok":1,"Supercomputer":1,"Diplomacy":2},"output":{"CivOasis":1}},{"id":"CottonPlantation","name":"Cotton Plantation","input":{},"output":{"Cotton":1}},{"id":"CottonMill","name":"Cotton Mill","input":{"Cotton":2},"output":{"Cloth":1}},{"id":"GarmentWorkshop","name":"Garment Workshop","input":{"Cloth":2},"output":{"Garment":1}},{"id":"FurnitureWorkshop","name":"Furniture Workshop","input":{"Lumber":2,"Copper":1},"output":{"Furniture":1}},{"id":"PrintingHouse","name":"Printing House","input":{"Paper":5,"Poem":1},"output":{"Book":1}},{"id":"FlourMill","name":"Flour Mill","input":{"Wheat":2},"output":{"Flour":1}},{"id":"PoultryFarm","name":"Poultry Farm","input":{"Wheat":2},"output":{"Meat":2}},{"id":"DairyFarm","name":"Dairy Farm","input":{"Wheat":2},"output":{"Milk":2}},{"id":"Stable","name":"Stable","input":{"Wheat":2},"output":{"Horse":1}},{"id":"Bakery","name":"Bakery","input":{"Water":1,"Flour":1},"output":{"Bread":1}},{"id":"CheeseMaker","name":"Cheese Maker","input":{"Milk":2},"output":{"Cheese":1}},{"id":"Brewery","name":"Brewery","input":{"Wheat":1,"Water":1},"output":{"Alcohol":1}},{"id":"PaperMaker","name":"Paper Maker","input":{"Wood":1,"Water":1},"output":{"Paper":1}},{"id":"Pizzeria","name":"Pizzeria","input":{"Cheese":1,"Meat":1,"Flour":2,"Water":2},"output":{"Pizza":1}},{"id":"PlasticsFactory","name":"Plastics Factory","input":{"Oil":2},"output":{"Plastics":1}},{"id":"LumberMill","name":"Lumber Mill","input":{"Wood":2},"output":{"Lumber":1}},{"id":"Glassworks","name":"Glassworks","input":{"Sand":2},"output":{"Glass":1}},{"id":"LensWorkshop","name":"Lens Workshop","input":{"Glass":2},"output":{"Lens":1}},{"id":"IronForge","name":"Iron Forge","input":{"Iron":1},"output":{"Tool":1}},{"id":"Brickworks","name":"Brickworks","input":{"Stone":2},"output":{"Brick":1}},{"id":"Marbleworks","name":"Marbleworks","input":{"Stone":2,"Tool":1},"output":{"Marble":1}},{"id":"ConcretePlant","name":"Concrete Plant","input":{"Brick":1,"Sand":2,"Tool":1},"output":{"Concrete":1}},{"id":"SteelMill","name":"Steel Mill","input":{"Iron":1,"Coal":1},"output":{"Steel":1}},{"id":"SiliconSmelter","name":"Silicon Smelter","input":{"Sand":5},"output":{"Silicon":1}},{"id":"CableFactory","name":"Cable Factory","input":{"Copper":5},"output":{"Cable":1}},{"id":"Steamworks","name":"Steamworks","input":{"Iron":1,"Coal":1,"Tool":1},"output":{"Engine":1}},{"id":"LocomotiveFactory","name":"Locomotive Factory","input":{"Engine":1,"Steel":10},"output":{"Train":1}},{"id":"MaglevFactory","name":"Maglev Factory","input":{"Train":15,"Airplane":15,"Car":15},"output":{"Maglev":1}},{"id":"CarFactory","name":"Car Factory","input":{"Engine":1,"Steel":1,"Furniture":1,"Cable":1,"Plastics":1,"Petrol":5},"output":{"Car":1}},{"id":"RobocarFactory","name":"Robocar Factory","input":{"Car":5,"Supercomputer":2,"Satellite":1},"output":{"Robocar":1}},{"id":"SpaceCenter","name":"Space Center","input":{"Maglev":1,"Radio":1,"Supercomputer":1},"output":{"PlanetaryRover":2},"ev":true},{"id":"OilRefinery","name":"Oil Refinery","input":{"Oil":2},"output":{"Petrol":1}},{"id":"SatelliteFactory","name":"Satellite Factory","input":{"Rocket":2},"output":{"Satellite":1}},{"id":"AirplaneFactory","name":"Airplane Factory","input":{"Biplane":2},"output":{"Airplane":1}},{"id":"SpacecraftFactory","name":"Spacecraft Factory","input":{"Rocket":2,"Satellite":2,"Airplane":2},"output":{"Spacecraft":1},"ev":true},{"id":"SemiconductorFab","name":"Semiconductor Fab","input":{"Silicon":10,"Copper":10},"output":{"Semiconductor":1}},{"id":"ComputerFactory","name":"Computer Factory","input":{"Semiconductor":5,"Plastics":5,"Aluminum":5},"output":{"Computer":1}},{"id":"OpticalFiberPlant","name":"Optical Fiber Plant","input":{"Cable":10,"Glass":10,"Plastics":10},"output":{"OpticalFiber":1}},{"id":"CoinMint","name":"Coin Mint","input":{"Gold":3},"output":{"Coin":1}},{"id":"Bank","name":"Bank","input":{"Coin":3},"output":{"Banknote":1}},{"id":"BondMarket","name":"Bond Market","input":{"Banknote":3},"output":{"Bond":1}},{"id":"StockExchange","name":"Stock Exchange","input":{"Bond":3},"output":{"Stock":1},"ev":true},{"id":"ForexMarket","name":"Forex Market","input":{"Banknote":2,"Bond":2},"output":{"Forex":1}},{"id":"MutualFund","name":"Mutual Fund","input":{"Forex":1,"Stock":1},"output":{"MutualFund":1}},{"id":"HedgeFund","name":"Hedge Fund","input":{"MutualFund":2},"output":{"HedgeFund":1}},{"id":"BitcoinMiner","name":"Bitcoin Miner","input":{"HedgeFund":2,"CivTok":1},"output":{"Bitcoin":1},"ev":true}]');var j=i(69212),M=i(63227),P=i(54077),L=(i(96299),i(17392)),w=i(74802),G=i(63577),W=i.n(G),I=i(70579);const T={type:j.xX,style:{stroke:"#555"},markerEnd:{type:j.TG.ArrowClosed,color:"#888"}},O={custom:e=>{let{data:t}=e;return(0,I.jsxs)("div",{style:{background:"#eee",border:"1px solid #ddd",borderRadius:"50%",padding:"10px",width:"150px",height:"150px",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",fontSize:"11px",textAlign:"center"},children:[(0,I.jsx)(j.h7,{type:"target",position:j.yX.Top,style:{background:"#555"},isConnectable:!0}),(0,I.jsx)("div",{children:t.inputs&&t.inputs.length>0&&(0,I.jsx)(f.A,{variant:"caption",component:"div",children:t.inputs.map((e=>"".concat(e.resource,": ").concat(e.amount))).join(", ")})}),(0,I.jsx)(f.A,{variant:"subtitle2",component:"div",children:t.label}),(0,I.jsx)("div",{children:(0,I.jsx)(f.A,{variant:"caption",component:"div",children:t.outputs.map((e=>"".concat(e.resource,": ").concat(e.amount))).join(", ")})}),(0,I.jsx)(j.h7,{type:"source",position:j.yX.Bottom,style:{background:"#555"},isConnectable:!0})]})}},E=e=>{let{chain:t,onClose:i,calculateBuildings:u,calculateAdjustedProduction:a,globalBuff:r,multipliers:l,requiredAmounts:p,selectedBuilding:d,buildingCount:s,buildingLevel:c,totalBuildingLevels:m,specificBuildingLevels:h,calculationMode:g}=e;const[b,C,v]=(0,j.ck)([]),[y,x,f]=(0,j.fM)([]),S=(0,n.useMemo)((()=>t.map(((e,t)=>({id:"".concat(e.id,"-").concat(t),type:"custom",data:{label:"".concat(e.name," (x").concat(e.estimatedBuildings||1,")"),inputs:e.input,outputs:e.output,requiredAmount:e.requiredLevels||0,originalId:e.id},position:{x:0,y:0}})))),[t]),A=(0,n.useMemo)((()=>t.flatMap(((e,i)=>e.input.flatMap((n=>t.map(((e,t)=>({...e,index:t}))).filter((e=>e.output.some((e=>e.resource===n.resource)))).map((t=>({id:"e".concat(t.id,"-").concat(t.index,"-").concat(e.id,"-").concat(i,"-").concat(n.resource),source:"".concat(t.id,"-").concat(t.index),target:"".concat(e.id,"-").concat(i),sourcePosition:j.yX.Bottom,targetPosition:j.yX.Top,type:j.xX,animated:!1,label:n.resource,style:{stroke:"#777",strokeWidth:"1.5px"},markerEnd:{type:j.TG.ArrowClosed,color:"#888"}})))))))),[t,g]);(0,n.useEffect)((()=>{const{nodes:e,edges:t}=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"TB";const n=new(W().graphlib.Graph);return n.setDefaultEdgeLabel((()=>({}))),n.setGraph({rankdir:i}),e.forEach((e=>{n.setNode(e.id,{width:150,height:150})})),t.forEach((e=>{n.setEdge(e.source,e.target)})),W().layout(n),{nodes:e.map((e=>{const t=n.node(e.id);return{...e,position:{x:t.x-75,y:t.y-75}}})),edges:t}}(S,A);C(e),x(t)}),[t,r,g,C,x]);const B=(0,n.useCallback)((e=>x((t=>[...t,e]))),[x]);return(0,I.jsxs)(o.A,{sx:{width:"100%",height:"100%",position:"relative"},children:[(0,I.jsx)(L.A,{onClick:i,sx:{position:"absolute",top:"10px",right:"10px",zIndex:10,bgcolor:"background.paper","&:hover":{bgcolor:"action.hover"}},"aria-label":"close",children:(0,I.jsx)(w.A,{})}),(0,I.jsxs)(j.Gc,{nodes:b,edges:y,onNodesChange:v,onEdgesChange:f,onConnect:B,nodeTypes:O,defaultEdgeOptions:T,fitView:!0,children:[(0,I.jsx)(M.V,{}),(0,I.jsx)(P.H,{})]})]})};var R=i(29206),q=i(99007);const N=()=>{var e;const[t,i]=(0,n.useState)({selectedBuilding:"",chain:[],multipliers:{},globalBuff:0,buildingCount:"",buildingLevel:"",specificBuildingLevels:{},totalBuildingLevels:null}),[S,j]=(0,n.useState)(!1),[M,P]=(0,n.useState)(!1),[L,w]=(0,n.useState)(null),[G,W]=(0,n.useState)("unique");(0,n.useEffect)((()=>{w(new Map(k.map((e=>[e.id,e]))))}),[]),(0,n.useEffect)((()=>{if(t.selectedBuilding&&L){let e;e="unique"===G?function(e,t,i,n,u,o){const a=[],r=[[t,u*o,null]],l=new Set;for(;r.length>0;){const[t,u,o]=r.shift();if(l.has(t))continue;l.add(t);const p=e.get(t);if(!p)continue;const d={id:p.id,name:p.name,input:Object.entries(p.input).map((e=>{let[t,i]=e;return{resource:t,amount:i*u}})),output:Object.entries(p.output).map((e=>{let[t,i]=e;return{resource:t,amount:i*u}})),requiredLevels:u,parentId:o,buildingCount:1,multiplier:i[p.id]||1,specificBuildingLevel:null};a.push(d),Object.entries(p.input).forEach((o=>{let[a,l]=o;const p=Array.from(e.values()).find((e=>Object.keys(e.output).includes(a)));if(p){const e=u*l/(p.output[a]*((i[p.id]||1)+n));r.push([p.id,e,t])}}))}return a}(L,t.selectedBuilding,t.multipliers,t.globalBuff,parseInt(t.buildingCount)||1,parseInt(t.buildingLevel)||1):function(e,t,i,n,u,o){const a=new Map,r=[[t,u*o,null]];for(;r.length>0;){const[t,u,o]=r.shift(),l=e.get(t);if(!l)continue;let p=a.get(t);p||(p={id:l.id,name:l.name,input:{},output:{},requiredLevels:0,parentIds:new Set,buildingCount:0,multiplier:i[l.id]||1,specificBuildingLevel:null},a.set(t,p)),p.requiredLevels+=u,p.buildingCount+=1,o&&p.parentIds.add(o),Object.entries(l.input).forEach((e=>{let[t,i]=e;p.input[t]=(p.input[t]||0)+i*u})),Object.entries(l.output).forEach((e=>{let[t,i]=e;p.output[t]=(p.output[t]||0)+i*u})),Object.entries(l.input).forEach((o=>{let[a,l]=o;const p=Array.from(e.values()).find((e=>Object.keys(e.output).includes(a)));if(p){const e=u*l/(p.output[a]*((i[p.id]||1)+n));r.push([p.id,e,t])}}))}return Array.from(a.values()).map((e=>({...e,input:Object.entries(e.input).map((e=>{let[t,i]=e;return{resource:t,amount:i}})),output:Object.entries(e.output).map((e=>{let[t,i]=e;return{resource:t,amount:i}})),parentId:Array.from(e.parentIds)[0]||null})))}(L,t.selectedBuilding,t.multipliers,t.globalBuff,parseInt(t.buildingCount)||1,parseInt(t.buildingLevel)||1);const n=function(e,t,i){return e.map((e=>{const n=t.get(e.id);if(!n)return e;const u=(o=e.id,i.specificBuildingLevels[o]?i.specificBuildingLevels[o]:i.buildingLevel?parseInt(i.buildingLevel):1);var o;const a=Object.values(n.output)[0]*((i.multipliers[e.id]||1)+i.globalBuff),r=Math.ceil(e.requiredLevels/u);return{...e,buildingCount:r,specificBuildingLevel:i.specificBuildingLevels[e.id]||null,outputPerLevel:a,totalOutput:a*e.requiredLevels,estimatedBuildings:r}}))}(e,L,t);i((e=>({...e,chain:n})))}}),[t.selectedBuilding,t.multipliers,L,t.globalBuff,t.buildingCount,t.buildingLevel,t.specificBuildingLevels,G]);const T=(0,n.useMemo)((()=>[...k].filter((e=>S||e.ev)).sort(((e,t)=>e.name.localeCompare(t.name)))),[S]),O=(e,t)=>{i((i=>({...i,[e]:t})))};return(0,I.jsxs)(u.A,{elevation:3,sx:{p:3,maxWidth:1200,mx:"auto"},children:[(0,I.jsx)(q.A,{title:"Production Chain Calculator and Display",description:"This page allows you to see the breakdown of the production chain required to generate a good. Select the building you want to build and its dependencies will be calculated. Click on the 'Show Visual Graph' to see a visualization of the chain."}),(0,I.jsx)(o.A,{sx:{mb:3},children:(0,I.jsxs)(a.Ay,{container:!0,spacing:2,alignItems:"center",children:[(0,I.jsx)(a.Ay,{item:!0,xs:12,sm:6,children:(0,I.jsxs)(r.A,{value:t.selectedBuilding,onChange:e=>O("selectedBuilding",e.target.value),fullWidth:!0,children:[(0,I.jsx)(l.A,{value:"",children:(0,I.jsx)("em",{children:"Select a building"})}),T.map((e=>(0,I.jsx)(l.A,{value:e.id,children:e.name},e.id)))]})}),(0,I.jsx)(a.Ay,{item:!0,xs:12,sm:6,children:(0,I.jsx)(p.A,{control:(0,I.jsx)(d.A,{checked:S,onChange:e=>j(e.target.checked)}),label:"Show All Items"})}),(0,I.jsx)(a.Ay,{item:!0,xs:12,sm:4,children:(0,I.jsx)(s.A,{label:"Main Building Count",type:"number",value:t.buildingCount,onChange:e=>O("buildingCount",e.target.value),fullWidth:!0,inputProps:{min:"0",step:"1"}})}),(0,I.jsx)(a.Ay,{item:!0,xs:12,sm:4,children:(0,I.jsx)(s.A,{label:"Main Building Level",type:"number",value:t.buildingLevel,onChange:e=>O("buildingLevel",e.target.value),fullWidth:!0,inputProps:{min:"0",step:"1"}})}),(0,I.jsx)(a.Ay,{item:!0,xs:12,children:(0,I.jsx)(s.A,{label:"Global Buff",type:"number",value:t.globalBuff,onChange:e=>O("globalBuff",parseInt(e.target.value)||0),fullWidth:!0,inputProps:{min:"0",step:"1"}})}),(0,I.jsxs)(c.A,{row:!0,value:G,onChange:e=>W(e.target.value),children:[(0,I.jsx)(p.A,{value:"unique",control:(0,I.jsx)(m.A,{}),label:"Unique Nodes"}),(0,I.jsx)(p.A,{value:"combined",control:(0,I.jsx)(m.A,{}),label:"Combined Nodes"})]})]})}),t.chain.length>0&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(h.A,{variant:"contained",color:"primary",onClick:()=>P(!0),sx:{mt:2,mb:2},children:"Show Visual Graph"}),(0,I.jsx)(g.A,{component:u.A,children:(0,I.jsxs)(b.A,{size:"small",children:[(0,I.jsx)(C.A,{children:(0,I.jsxs)(v.A,{children:[(0,I.jsx)(y.A,{children:"Building"}),(0,I.jsx)(y.A,{children:"Input"}),(0,I.jsx)(y.A,{children:"Output"}),(0,I.jsx)(y.A,{children:"Building Specific Multiplier"}),(0,I.jsx)(y.A,{children:"Specific Building Level"}),(0,I.jsx)(y.A,{children:"Total Building Levels"}),(0,I.jsx)(y.A,{children:"Estimated Buildings"})]})}),(0,I.jsx)(x.A,{children:t.chain.map((e=>(0,I.jsxs)(v.A,{children:[(0,I.jsx)(y.A,{children:e.name}),(0,I.jsx)(y.A,{style:{whiteSpace:"pre-line"},children:e.input.map((e=>"".concat(e.resource,": ").concat(e.amount.toFixed(0)))).join("\n")}),(0,I.jsx)(y.A,{style:{whiteSpace:"pre-line"},children:e.output.map((e=>"".concat(e.resource,": ").concat(e.amount.toFixed(0)))).join("\n")}),(0,I.jsx)(y.A,{children:(0,I.jsx)(s.A,{type:"number",value:t.multipliers[e.id]||1,onChange:t=>{return n=e.id,u=t.target.value,void i((e=>({...e,multipliers:{...e.multipliers,[n]:parseFloat(u)||1}})));var n,u},inputProps:{min:"1",step:"0.1",style:{width:"80px"}}})}),(0,I.jsx)(y.A,{children:(0,I.jsx)(s.A,{type:"number",value:t.specificBuildingLevels[e.id]||"",onChange:t=>{return n=e.id,u=t.target.value,void i((e=>({...e,specificBuildingLevels:{...e.specificBuildingLevels,[n]:""===u?null:parseInt(u)}})));var n,u},inputProps:{min:"1",step:"1",style:{width:"80px"}}})}),(0,I.jsx)(y.A,{children:e.requiredLevels.toFixed(0)}),(0,I.jsx)(y.A,{children:e.estimatedBuildings})]},e.id)))})]})}),(0,I.jsxs)(o.A,{sx:{mt:2,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,I.jsx)(f.A,{variant:"subtitle1",children:t.selectedBuilding&&"".concat(null===(e=k.find((e=>e.id===t.selectedBuilding)))||void 0===e?void 0:e.name," Estimated Output: ").concat(F(t.chain.find((e=>e.id===t.selectedBuilding)),t))}),(0,I.jsxs)(o.A,{sx:{display:"flex",gap:2},children:[(0,I.jsxs)(f.A,{variant:"subtitle1",children:["Total Building Levels (Est): ",A(t.chain,t)]}),(0,I.jsxs)(f.A,{variant:"subtitle1",children:["Total Buildings (Est): ",B(t.chain,t)]})]})]})]}),(0,I.jsx)(R.A,{open:M,onClose:()=>P(!1),"aria-labelledby":"product-chain-graph-modal","aria-describedby":"product-chain-graph-description",children:(0,I.jsx)(o.A,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"90%",height:"90%",bgcolor:"background.paper",boxShadow:24,p:4},children:(0,I.jsx)(E,{chain:t.chain,onClose:()=>P(!1),globalBuff:t.globalBuff,multipliers:t.multipliers,selectedBuilding:t.selectedBuilding,buildingCount:parseInt(t.buildingCount)||1,buildingLevel:parseInt(t.buildingLevel)||1,specificBuildingLevels:t.specificBuildingLevels,calculationMode:G})})})]})}}}]);
//# sourceMappingURL=531.dd54c7b0.chunk.js.map