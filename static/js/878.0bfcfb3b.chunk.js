"use strict";(self.webpackChunkoveranalyse=self.webpackChunkoveranalyse||[]).push([[878],{99007:(e,t,i)=>{i.d(t,{A:()=>a});i(65043);var n=i(96446),u=i(85865),o=i(70579);const a=e=>{let{title:t,description:i}=e;return(0,o.jsxs)(n.A,{sx:{mb:4},children:[(0,o.jsx)(u.A,{variant:"h4",gutterBottom:!0,children:t}),i&&(0,o.jsx)(u.A,{variant:"subtitle1",sx:{mb:3,fontStyle:"italic",color:"text.secondary",borderLeft:"4px solid",borderColor:"primary.main",pl:2},children:i})]})}},52823:(e,t,i)=>{i.r(t),i.d(t,{default:()=>N});var n=i(65043),u=i(63336),o=i(96446),a=i(68903),r=i(23914),l=i(32143),d=i(69416),p=i(23217),s=i(64600),c=i(11906),m=i(79650),h=i(71806),g=i(84882),b=i(28076),x=i(10039),y=i(73460),C=i(85865);function v(e){return e.totalBuildingLevels?e.totalBuildingLevels:e.buildingCount&&e.buildingLevel?e.buildingCount*e.buildingLevel:1}function f(e,t){return Math.ceil(e.reduce(((e,i)=>e+i.requiredAmount*v(t)),0))}function S(e,t){const i=f(e,t),n=t.buildingLevel||20;return Math.ceil(i/n)}function A(e,t){if(!e)return null;const i=Math.min(99,Math.max(1,t.multipliers[e.id]||1)),n=Math.min(99,Math.max(0,t.globalBuff));return Math.ceil((i+n)*e.requiredAmount)}const B=JSON.parse('[{"id":"WheatFarm","name":"Wheat Farm","input":{},"output":{"Wheat":1}},{"id":"StoneQuarry","name":"Stone Quarry","input":{},"output":{"Stone":1}},{"id":"LoggingCamp","name":"Logging Camp","input":{},"output":{"Wood":1}},{"id":"Aqueduct","name":"Aqueduct","input":{},"output":{"Water":1}},{"id":"IronMiningCamp","name":"Iron Mining Camp","input":{},"output":{"Iron":1}},{"id":"CopperMiningCamp","name":"Copper Mining Camp","input":{},"output":{"Copper":1}},{"id":"CoalMine","name":"Coal Mine","input":{},"output":{"Coal":1}},{"id":"Sandpit","name":"Sandpit","input":{},"output":{"Sand":1}},{"id":"GoldMiningCamp","name":"Gold Mining Camp","input":{},"output":{"Gold":1}},{"id":"UraniumMine","name":"Uranium Mine","input":{},"output":{"Uranium":1}},{"id":"UraniumEnrichmentPlant","name":"Uranium Enrichment Plant","input":{"Uranium":10},"output":{"NuclearFuelRod":1}},{"id":"OilWell","name":"Oil Well","input":{},"output":{"Oil":1}},{"id":"NaturalGasWell","name":"Natural Gas Well","input":{},"output":{"NaturalGas":1}},{"id":"AluminumSmelter","name":"Aluminum Smelter","input":{},"output":{"Aluminum":1}},{"id":"HydroDam","name":"Hydro Dam","input":{},"output":{"Water":1}},{"id":"SwordForge","name":"Sword Forge","input":{"Tool":2},"output":{"Sword":1}},{"id":"Armory","name":"Armory","input":{"Tool":2},"output":{"Armor":1}},{"id":"ChariotWorkshop","name":"Chariot Workshop","input":{"Horse":2,"Lumber":2,"Copper":1},"output":{"Chariot":1}},{"id":"KnightCamp","name":"Knight Camp","input":{"Horse":1,"Armor":1,"Sword":1},"output":{"Knight":1}},{"id":"CannonWorkshop","name":"Cannon Workshop","input":{"Iron":2,"Wood":1,"Tool":1},"output":{"Cannon":1}},{"id":"GunpowderMill","name":"Gunpowder Mill","input":{"Wood":1,"Coal":1},"output":{"Gunpowder":1}},{"id":"DynamiteWorkshop","name":"Dynamite Workshop","input":{"Wheat":1,"Gunpowder":1,"Coal":1},"output":{"Dynamite":1}},{"id":"SiegeWorkshop","name":"Siege Workshop","input":{"Lumber":2,"Iron":2,"Tool":1},"output":{"SiegeRam":1}},{"id":"CaravelBuilder","name":"Caravel Builder","input":{"Lumber":5,"Cloth":2,"Tool":2},"output":{"Caravel":1}},{"id":"GalleonBuilder","name":"Galleon Builder","input":{"Caravel":1,"Sword":1,"SiegeRam":1,"Armor":1},"output":{"Galleon":1}},{"id":"FrigateBuilder","name":"Frigate Builder","input":{"Galleon":1,"Knight":1,"Cannon":1,"Lens":1},"output":{"Frigate":1}},{"id":"RifleFactory","name":"Rifle Factory","input":{"Gunpowder":5,"Tool":5},"output":{"Rifle":1}},{"id":"GatlingGunFactory","name":"Gatling Gun Factory","input":{"Rifle":1,"Gunpowder":5},"output":{"GatlingGun":1}},{"id":"ArtilleryFactory","name":"Artillery Factory","input":{"GatlingGun":1,"Dynamite":1,"Aluminum":5},"output":{"Artillery":1}},{"id":"IroncladBuilder","name":"Ironclad Builder","input":{"GatlingGun":1,"Rifle":1,"Frigate":1},"output":{"Ironclad":1}},{"id":"BattleshipBuilder","name":"Battleship Builder","input":{"Ironclad":1,"Artillery":1,"Cable":5,"Steel":5,"Aluminum":5},"output":{"Battleship":1}},{"id":"TankFactory","name":"Tank Factory","input":{"Engine":1,"Steel":10,"Cannon":1,"GatlingGun":1},"output":{"Tank":1}},{"id":"BiplaneFactory","name":"Biplane Factory","input":{"Engine":1,"Steel":1,"Lens":1,"Petrol":5},"output":{"Biplane":1}},{"id":"RocketFactory","name":"Rocket Factory","input":{"Engine":1,"Artillery":1,"Steel":5,"Cable":5,"Petrol":10},"output":{"Rocket":1}},{"id":"AtomicFacility","name":"Atomic Facility","input":{"Dynamite":10,"Uranium":10},"output":{"AtomicBomb":1}},{"id":"FighterJetPlant","name":"Fighter Jet Plant","input":{"Airplane":1,"Artillery":1},"output":{"FighterJet":2}},{"id":"AircraftCarrierYard","name":"Aircraft Carrier Yard","input":{"Battleship":1,"FighterJet":10},"output":{"AircraftCarrier":1}},{"id":"SubmarineYard","name":"Submarine Yard","input":{"Ironclad":2},"output":{"Submarine":1},"ev":true},{"id":"NuclearSubmarineYard","name":"Nuclear Submarine Yard","input":{"Submarine":2,"NuclearMissile":2},"output":{"NuclearSubmarine":1}},{"id":"NuclearMissileSilo","name":"Nuclear Missile Silo","input":{"AtomicBomb":1,"Rocket":1},"output":{"NuclearMissile":1}},{"id":"Peacekeeper","name":"Peacekeeper","input":{"NuclearMissile":4,"Diplomacy":1,"Radio":1},"output":{"Peace":1}},{"id":"WritersGuild","name":"Writers Guild","input":{"Paper":2},"output":{"Poem":1}},{"id":"PoetrySchool","name":"Poetry School","input":{"Paper":2,"Alcohol":1},"output":{"Poem":2}},{"id":"PaintersGuild","name":"Painters Guild","input":{"Paper":2},"output":{"Painting":1}},{"id":"MusiciansGuild","name":"Musicians Guild","input":{"Alcohol":2},"output":{"Music":1}},{"id":"ActorsGuild","name":"Actors Guild","input":{"Music":1,"Poem":1},"output":{"Opera":2}},{"id":"Shrine","name":"Shrine","input":{"Horse":1,"Alcohol":1},"output":{"Faith":1}},{"id":"Church","name":"Church","input":{"Music":1,"Poem":1},"output":{"Faith":3}},{"id":"Mosque","name":"Mosque","input":{"Cheese":1,"Opera":1},"output":{"Faith":4}},{"id":"Pagoda","name":"Pagoda","input":{"Painting":1,"Furniture":1},"output":{"Faith":3}},{"id":"University","name":"University","input":{"Poem":2,"Faith":2},"output":{"Philosophy":1}},{"id":"PublishingHouse","name":"Publishing House","input":{"Philosophy":2,"Book":10},"output":{"Newspaper":1}},{"id":"MagazinePublisher","name":"Magazine Publisher","input":{"Sports":2,"Book":10},"output":{"Magazine":1}},{"id":"Museum","name":"Museum","input":{"Music":2,"Painting":2},"output":{"Culture":1}},{"id":"Courthouse","name":"Courthouse","input":{"Philosophy":1,"Faith":1,"Culture":1},"output":{"Law":1}},{"id":"Stadium","name":"Stadium","input":{"Culture":1,"Opera":1,"Philosophy":1},"output":{"Sports":1}},{"id":"Parliament","name":"Parliament","input":{"Culture":2,"Philosophy":2,"Law":2},"output":{"Politics":1}},{"id":"MovieStudio","name":"Movie Studio","input":{"Sports":5,"Lens":5,"Garment":5},"output":{"Movie":1}},{"id":"RadioStation","name":"Radio Station","input":{"Magazine":5,"Newspaper":5,"Culture":5},"output":{"Radio":1}},{"id":"Embassy","name":"Embassy","input":{"Law":5,"Politics":5,"Philosophy":5},"output":{"Diplomacy":1}},{"id":"TVStation","name":"TV Station","input":{"Radio":2,"Movie":10},"output":{"TV":1},"ev":true},{"id":"InternetServiceProvider","name":"Internet Service Provider","input":{"Computer":1,"OpticalFiber":5},"output":{"Internet":1}},{"id":"SoftwareCompany","name":"Software Company","input":{"Computer":1,"Philosophy":10},"output":{"Software":1}},{"id":"SupercomputerLab","name":"Supercomputer Lab","input":{"Software":1,"Computer":5},"output":{"Supercomputer":1}},{"id":"CivGPT","name":"CivGPT","input":{"Internet":1,"Supercomputer":2,"Radio":1},"output":{"CivGPT":1}},{"id":"CivTok","name":"CivTok","input":{"Internet":1,"Politics":1},"output":{"CivTok":1}},{"id":"CivOasis","name":"CivOasis","input":{"CivTok":1,"Supercomputer":1,"Diplomacy":2},"output":{"CivOasis":1}},{"id":"CottonPlantation","name":"Cotton Plantation","input":{},"output":{"Cotton":1}},{"id":"CottonMill","name":"Cotton Mill","input":{"Cotton":2},"output":{"Cloth":1}},{"id":"GarmentWorkshop","name":"Garment Workshop","input":{"Cloth":2},"output":{"Garment":1}},{"id":"FurnitureWorkshop","name":"Furniture Workshop","input":{"Lumber":2,"Copper":1},"output":{"Furniture":1}},{"id":"PrintingHouse","name":"Printing House","input":{"Paper":5,"Poem":1},"output":{"Book":1}},{"id":"FlourMill","name":"Flour Mill","input":{"Wheat":2},"output":{"Flour":1}},{"id":"PoultryFarm","name":"Poultry Farm","input":{"Wheat":2},"output":{"Meat":2}},{"id":"DairyFarm","name":"Dairy Farm","input":{"Wheat":2},"output":{"Milk":2}},{"id":"Stable","name":"Stable","input":{"Wheat":2},"output":{"Horse":1}},{"id":"Bakery","name":"Bakery","input":{"Water":1,"Flour":1},"output":{"Bread":1}},{"id":"CheeseMaker","name":"Cheese Maker","input":{"Milk":2},"output":{"Cheese":1}},{"id":"Brewery","name":"Brewery","input":{"Wheat":1,"Water":1},"output":{"Alcohol":1}},{"id":"PaperMaker","name":"Paper Maker","input":{"Wood":1,"Water":1},"output":{"Paper":1}},{"id":"Pizzeria","name":"Pizzeria","input":{"Cheese":1,"Meat":1,"Flour":2,"Water":2},"output":{"Pizza":1}},{"id":"PlasticsFactory","name":"Plastics Factory","input":{"Oil":2},"output":{"Plastics":1}},{"id":"LumberMill","name":"Lumber Mill","input":{"Wood":2},"output":{"Lumber":1}},{"id":"Glassworks","name":"Glassworks","input":{"Sand":2},"output":{"Glass":1}},{"id":"LensWorkshop","name":"Lens Workshop","input":{"Glass":2},"output":{"Lens":1}},{"id":"IronForge","name":"Iron Forge","input":{"Iron":1},"output":{"Tool":1}},{"id":"Brickworks","name":"Brickworks","input":{"Stone":2},"output":{"Brick":1}},{"id":"Marbleworks","name":"Marbleworks","input":{"Stone":2,"Tool":1},"output":{"Marble":1}},{"id":"ConcretePlant","name":"Concrete Plant","input":{"Brick":1,"Sand":2,"Tool":1},"output":{"Concrete":1}},{"id":"SteelMill","name":"Steel Mill","input":{"Iron":1,"Coal":1},"output":{"Steel":1}},{"id":"SiliconSmelter","name":"Silicon Smelter","input":{"Sand":5},"output":{"Silicon":1}},{"id":"CableFactory","name":"Cable Factory","input":{"Copper":5},"output":{"Cable":1}},{"id":"Steamworks","name":"Steamworks","input":{"Iron":1,"Coal":1,"Tool":1},"output":{"Engine":1}},{"id":"LocomotiveFactory","name":"Locomotive Factory","input":{"Engine":1,"Steel":10},"output":{"Train":1}},{"id":"MaglevFactory","name":"Maglev Factory","input":{"Train":15,"Airplane":15,"Car":15},"output":{"Maglev":1}},{"id":"CarFactory","name":"Car Factory","input":{"Engine":1,"Steel":1,"Furniture":1,"Cable":1,"Plastics":1,"Petrol":5},"output":{"Car":1}},{"id":"RobocarFactory","name":"Robocar Factory","input":{"Car":5,"Supercomputer":2,"Satellite":1},"output":{"Robocar":1}},{"id":"SpaceCenter","name":"Space Center","input":{"Maglev":1,"Radio":1,"Supercomputer":1},"output":{"PlanetaryRover":2},"ev":true},{"id":"OilRefinery","name":"Oil Refinery","input":{"Oil":2},"output":{"Petrol":1}},{"id":"SatelliteFactory","name":"Satellite Factory","input":{"Rocket":2},"output":{"Satellite":1}},{"id":"AirplaneFactory","name":"Airplane Factory","input":{"Biplane":2},"output":{"Airplane":1}},{"id":"SpacecraftFactory","name":"Spacecraft Factory","input":{"Rocket":2,"Satellite":2,"Airplane":2},"output":{"Spacecraft":1},"ev":true},{"id":"SemiconductorFab","name":"Semiconductor Fab","input":{"Silicon":10,"Copper":10},"output":{"Semiconductor":1}},{"id":"ComputerFactory","name":"Computer Factory","input":{"Semiconductor":5,"Plastics":5,"Aluminum":5},"output":{"Computer":1}},{"id":"OpticalFiberPlant","name":"Optical Fiber Plant","input":{"Cable":10,"Glass":10,"Plastics":10},"output":{"OpticalFiber":1}},{"id":"CoinMint","name":"Coin Mint","input":{"Gold":3},"output":{"Coin":1}},{"id":"Bank","name":"Bank","input":{"Coin":3},"output":{"Banknote":1}},{"id":"BondMarket","name":"Bond Market","input":{"Banknote":3},"output":{"Bond":1}},{"id":"StockExchange","name":"Stock Exchange","input":{"Bond":3},"output":{"Stock":1},"ev":true},{"id":"ForexMarket","name":"Forex Market","input":{"Banknote":2,"Bond":2},"output":{"Forex":1}},{"id":"MutualFund","name":"Mutual Fund","input":{"Forex":1,"Stock":1},"output":{"MutualFund":1}},{"id":"HedgeFund","name":"Hedge Fund","input":{"MutualFund":2},"output":{"HedgeFund":1}},{"id":"BitcoinMiner","name":"Bitcoin Miner","input":{"HedgeFund":2,"CivTok":1},"output":{"Bitcoin":1},"ev":true}]');var M=i(69212),k=i(63227),F=i(54077),j=(i(96299),i(17392)),P=i(74802),w=i(63577),L=i.n(w),G=i(70579);const I=e=>{let{data:t}=e;const{inputs:i=[],label:n="",outputs:u=[]}=t;return(0,G.jsxs)("div",{style:{position:"relative",minWidth:"200px"},children:[(0,G.jsx)("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"rgba(255, 255, 255, 0.8)",border:"1px solid #ccc",borderRadius:"5px",zIndex:-1}}),(0,G.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"2px"},children:[i.length>0&&(0,G.jsx)("div",{style:{display:"flex",justifyContent:"space-between",gap:"2px"},children:i.map(((e,t)=>(0,G.jsxs)("div",{style:{position:"relative",flex:1,minWidth:"90px",height:50,border:"1px solid #ccc",borderRadius:"3px",display:"flex",alignItems:"center",justifyContent:"center",background:"white"},children:[(0,G.jsx)(M.h7,{type:"target",position:M.yX.Top,id:`input-${t}`,style:{background:"#555",width:8,height:8,zIndex:1}}),(0,G.jsxs)(C.A,{variant:"caption",component:"div",align:"center",children:[`${e.resource}: ${Math.ceil(e.amount)}`," "]})]},t)))}),(0,G.jsx)("div",{style:{height:40,border:"1px solid #ccc",borderRadius:"3px",display:"flex",alignItems:"center",justifyContent:"center",background:"white"},children:(0,G.jsx)(C.A,{variant:"subtitle2",component:"div",children:n})}),(0,G.jsxs)("div",{style:{position:"relative",height:40,border:"1px solid #ccc",borderRadius:"3px",display:"flex",alignItems:"center",justifyContent:"center",background:"white"},children:[(0,G.jsx)(C.A,{variant:"caption",component:"div",children:u.map((e=>`${e.resource}: ${Math.ceil(e.amount)}`)).join(", ")}),(0,G.jsx)(M.h7,{type:"source",position:M.yX.Bottom,style:{background:"#555",width:8,height:8,zIndex:1},isConnectable:!0})]})]})]})},W={type:M.xX,style:{stroke:"#555"},markerEnd:{type:M.TG.ArrowClosed,color:"#888"}},T={processNode:I},R=e=>{let{chain:t,onClose:i,calculateBuildings:u,calculateAdjustedProduction:a,globalBuff:r,multipliers:l,requiredAmounts:d,selectedBuilding:p,buildingCount:s,buildingLevel:c,totalBuildingLevels:m,specificBuildingLevels:h,calculationMode:g}=e;const[b,x,y]=(0,M.ck)([]),[C,v,f]=(0,M.fM)([]),S=(0,n.useMemo)((()=>t.map((e=>({id:e.id,type:"processNode",data:{label:`${e.name} (x${e.estimatedBuildings||1})`,inputs:e.input,outputs:e.output,requiredAmount:e.requiredLevels||0,originalId:e.buildingId},position:{x:0,y:0}})))),[t]),A=(0,n.useMemo)((()=>t.filter((e=>e.parentId)).flatMap((e=>e.output.map(((i,n)=>{const u=t.find((t=>t.id===e.parentId));if(!u)return null;const o=u.input.findIndex((e=>e.resource===i.resource));return-1===o?null:{id:`e${e.id}-${e.parentId}-${i.resource}`,source:e.id,target:e.parentId,sourceHandle:"output",targetHandle:`input-${o}`,sourcePosition:M.yX.Bottom,targetPosition:M.yX.Top,type:M.xX,animated:!1,style:{stroke:"#777",strokeWidth:"1.5px"},markerEnd:{type:M.TG.ArrowClosed,color:"#888"}}})).filter(Boolean)))),[t]);(0,n.useEffect)((()=>{const{nodes:e,edges:t}=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"TB";const n=new(L().graphlib.Graph);return n.setDefaultEdgeLabel((()=>({}))),n.setGraph({rankdir:i}),e.forEach((e=>{n.setNode(e.id,{width:200,height:150})})),t.forEach((e=>{n.setEdge(e.source,e.target)})),L().layout(n),{nodes:e.map((e=>{const t=n.node(e.id);return{...e,position:{x:t.x-100,y:t.y-75}}})),edges:t}}(S,A);x(e),v(t)}),[t,r,g,x,v]);const B=(0,n.useCallback)((e=>v((t=>[...t,e]))),[v]);return(0,G.jsxs)(o.A,{sx:{width:"100%",height:"100%",position:"relative"},children:[(0,G.jsx)(j.A,{onClick:i,sx:{position:"absolute",top:"10px",right:"10px",zIndex:10,bgcolor:"background.paper","&:hover":{bgcolor:"action.hover"}},"aria-label":"close",children:(0,G.jsx)(P.A,{})}),(0,G.jsxs)(M.Gc,{nodes:b,edges:C,onNodesChange:y,onEdgesChange:f,onConnect:B,nodeTypes:T,defaultEdgeOptions:W,fitView:!0,children:[(0,G.jsx)(k.V,{}),(0,G.jsx)(F.H,{})]})]})};var E=i(1888),O=i(99007);const $=e=>{let{title:t,description:i}=e;return(0,G.jsxs)(o.A,{sx:{mb:4,backgroundColor:"#fff3e0",padding:0,borderRadius:1},children:[t&&(0,G.jsx)(C.A,{variant:"h4",gutterBottom:!0,children:t}),i&&(0,G.jsx)(C.A,{variant:"subtitle1",sx:{mb:3,fontStyle:"italic",color:"text.secondary",borderLeft:"4px solid",borderColor:"#d32f2f",pl:2},children:i})]})},N=()=>{var e;const[t,i]=(0,n.useState)({selectedBuilding:"",chain:[],multipliers:{},globalBuff:0,buildingCount:"",buildingLevel:"",specificBuildingLevels:{},totalBuildingLevels:null}),[v,M]=(0,n.useState)(!1),[k,F]=(0,n.useState)(!1),[j,P]=(0,n.useState)(null);(0,n.useEffect)((()=>{P(new Map(B.map((e=>[e.id,e]))))}),[]),(0,n.useEffect)((()=>{if(t.selectedBuilding&&j){const e=function(e,t,i,n,u,o){const a=[],r=[[t,u*o,null,0]],l=new Map;function d(e,t){var u;return e/((null!==(u=i[t])&&void 0!==u?u:1)+n)}for(;r.length>0;){var p;const[t,n,u,o]=r.shift(),s=`${t}_${null!==u&&void 0!==u?u:"root"}_${o}`;if(l.has(s))continue;l.set(s,!0);const c=e.get(t);if(!c)continue;const m=Object.entries(c.output).map((e=>{let[t,i]=e;return{resource:t,amount:i*n}})),h=Object.entries(c.input).map((e=>{let[i,u]=e;return{resource:i,amount:d(u*n,t)}})),g={id:s,buildingId:t,name:c.name,input:h,output:m,requiredLevels:n,parentId:u,buildingCount:1,multiplier:null!==(p=i[t])&&void 0!==p?p:1};a.push(g);let b=o+1;h.forEach((t=>{let{resource:i,amount:n}=t;const u=Array.from(e.values()).find((e=>Object.keys(e.output).includes(i)));if(u){const e=n/u.output[i];r.push([u.id,e,s,b++])}}))}return a}(j,t.selectedBuilding,t.multipliers,t.globalBuff,parseInt(t.buildingCount)||1,parseInt(t.buildingLevel)||1,t.specificBuildingLevels),n=function(e,t,i){return e.map((e=>{var n;const u=t.get(e.buildingId);if(!u)return e;const o=e.buildingId===i.selectedBuilding,a=null!==(n=i.multipliers[e.buildingId])&&void 0!==n?n:1,r=Object.values(u.output)[0]*(o?1:a+i.globalBuff),l=Math.ceil(e.requiredLevels/(i.specificBuildingLevels[e.buildingId]||i.buildingLevel||1));return{...e,buildingCount:l,multiplier:a,outputPerLevel:r,totalOutput:r*e.requiredLevels,estimatedBuildings:l,isSelectedBuilding:o}}))}(e,j,t);i((e=>({...e,chain:n})))}}),[t.selectedBuilding,t.multipliers,j,t.globalBuff,t.buildingCount,t.buildingLevel,t.specificBuildingLevels]);const w=(0,n.useMemo)((()=>[...B].filter((e=>v||e.ev)).sort(((e,t)=>e.name.localeCompare(t.name)))),[v]),L=(e,t)=>{i((i=>({...i,[e]:t})))};return(0,G.jsxs)(u.A,{elevation:3,sx:{p:3,maxWidth:1200,mx:"auto"},children:[(0,G.jsx)(O.A,{title:"Production Chain Calculator and Display",description:"This page allows you to see the breakdown of the production chain required to generate a good. Select the building you want to build and its dependencies will be calculated. Click on the 'Show Visual Graph' to see a visualization of the chain."}),(0,G.jsx)($,{title:"Big Update!",description:"This page has been dramatically overhauled with new logic and improved visualizations. Bugs are likely. Collapsing buildings is currently not implemented, but will be soon."}),(0,G.jsx)(o.A,{sx:{mb:3},children:(0,G.jsxs)(a.Ay,{container:!0,spacing:2,alignItems:"center",children:[(0,G.jsx)(a.Ay,{item:!0,xs:12,sm:6,children:(0,G.jsxs)(r.A,{value:t.selectedBuilding,onChange:e=>L("selectedBuilding",e.target.value),fullWidth:!0,children:[(0,G.jsx)(l.A,{value:"",children:(0,G.jsx)("em",{children:"Select a building"})}),w.map((e=>(0,G.jsx)(l.A,{value:e.id,children:e.name},e.id)))]})}),(0,G.jsx)(a.Ay,{item:!0,xs:12,sm:6,children:(0,G.jsx)(d.A,{control:(0,G.jsx)(p.A,{checked:v,onChange:e=>M(e.target.checked)}),label:"Show All Items"})}),(0,G.jsx)(a.Ay,{item:!0,xs:12,sm:4,children:(0,G.jsx)(s.A,{label:"Main Building Count",type:"number",value:t.buildingCount,onChange:e=>L("buildingCount",e.target.value),fullWidth:!0,inputProps:{min:"0",step:"1"}})}),(0,G.jsx)(a.Ay,{item:!0,xs:12,sm:4,children:(0,G.jsx)(s.A,{label:"Main Building Level",type:"number",value:t.buildingLevel,onChange:e=>L("buildingLevel",e.target.value),fullWidth:!0,inputProps:{min:"0",step:"1"}})}),(0,G.jsx)(a.Ay,{item:!0,xs:12,children:(0,G.jsx)(s.A,{label:"Global Buff",type:"number",value:t.globalBuff,onChange:e=>{const t=Math.min(99,Math.max(0,parseInt(e.target.value)||0));L("globalBuff",t)},fullWidth:!0,inputProps:{min:"0",max:"99",step:"1"}})})]})}),t.chain.length>0&&(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(c.A,{variant:"contained",color:"primary",onClick:()=>F(!0),sx:{mt:2,mb:2},children:"Show Visual Graph"}),(0,G.jsx)(m.A,{component:u.A,children:(0,G.jsxs)(h.A,{size:"small",children:[(0,G.jsx)(g.A,{children:(0,G.jsxs)(b.A,{children:[(0,G.jsx)(x.A,{children:"Building"}),(0,G.jsx)(x.A,{children:"Input"}),(0,G.jsx)(x.A,{children:"Output"}),(0,G.jsx)(x.A,{children:"Building Specific Multiplier"}),(0,G.jsx)(x.A,{children:"Specific Building Level"}),(0,G.jsx)(x.A,{children:"Total Building Levels"}),(0,G.jsx)(x.A,{children:"Estimated Buildings"})]})}),(0,G.jsx)(y.A,{children:t.chain.map((e=>{var n;return(0,G.jsxs)(b.A,{children:[(0,G.jsx)(x.A,{children:e.name}),(0,G.jsx)(x.A,{style:{whiteSpace:"pre-line"},children:e.input.map((e=>`${e.resource}: ${e.amount.toFixed(0)}`)).join("\n")}),(0,G.jsx)(x.A,{style:{whiteSpace:"pre-line"},children:e.output.map((e=>`${e.resource}: ${e.amount.toFixed(0)}`)).join("\n")}),(0,G.jsx)(x.A,{children:(0,G.jsx)(s.A,{type:"number",value:null!==(n=t.multipliers[e.buildingId])&&void 0!==n?n:1,onChange:t=>{const n=Math.min(99,Math.max(1,parseFloat(t.target.value)||1));((e,t)=>{i((i=>({...i,multipliers:{...i.multipliers,[e]:t}})))})(e.buildingId,n)},inputProps:{min:"1",max:"99",step:"1",style:{width:"80px"}}})}),(0,G.jsx)(x.A,{children:(0,G.jsx)(s.A,{type:"number",value:t.specificBuildingLevels[e.id]||"",onChange:t=>{const n=""===t.target.value?"":Math.min(99,Math.max(1,parseInt(t.target.value)||1));((e,t)=>{i((i=>({...i,specificBuildingLevels:{...i.specificBuildingLevels,[e]:""===t?null:parseInt(t)}})))})(e.id,n)},inputProps:{min:"1",max:"99",step:"1",style:{width:"80px"}}})}),(0,G.jsx)(x.A,{children:e.requiredLevels.toFixed(0)}),(0,G.jsx)(x.A,{children:e.estimatedBuildings})]},e.id)}))})]})}),(0,G.jsxs)(o.A,{sx:{mt:2,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,G.jsx)(C.A,{variant:"subtitle1",children:t.selectedBuilding&&`${null===(e=B.find((e=>e.id===t.selectedBuilding)))||void 0===e?void 0:e.name} Estimated Output: ${A(t.chain.find((e=>e.id===t.selectedBuilding)),t)}`}),(0,G.jsxs)(o.A,{sx:{display:"flex",gap:2},children:[(0,G.jsxs)(C.A,{variant:"subtitle1",children:["Total Building Levels (Est): ",f(t.chain,t)]}),(0,G.jsxs)(C.A,{variant:"subtitle1",children:["Total Buildings (Est): ",S(t.chain,t)]})]})]})]}),(0,G.jsx)(E.A,{open:k,onClose:()=>F(!1),"aria-labelledby":"product-chain-graph-modal","aria-describedby":"product-chain-graph-description",children:(0,G.jsx)(o.A,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"90%",height:"90%",bgcolor:"background.paper",boxShadow:24,p:4},children:(0,G.jsx)(R,{chain:t.chain,onClose:()=>F(!1),globalBuff:t.globalBuff,multipliers:t.multipliers,selectedBuilding:t.selectedBuilding,buildingCount:parseInt(t.buildingCount)||1,buildingLevel:parseInt(t.buildingLevel)||1,specificBuildingLevels:t.specificBuildingLevels})})})]})}}}]);
//# sourceMappingURL=878.0bfcfb3b.chunk.js.map